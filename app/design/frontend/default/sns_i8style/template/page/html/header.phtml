<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category   design_default
 * @package    Mage
 * @copyright  Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php
$catNames = array(
	array("Bathroom", "BATHROOM SUPPLIES"),
	array("Kitchen & Laundry", "KITCHEN & LAUNDRY"),
	array("Appliances & Heatpumps", "APPLIANCES"),
	array("AIR CON / HEAT PUMPS", "AIR CONDITIONERS / HEAT PUMPS"),
	array("Flooring & Tiling", "FLOORING & TILING"),
	array("Lighting, Electrical & Plumbing", "LIGHTING, ELECTRICAL & PLUMBING"),
	array("Hardware & Building Supplies", "HARDWARE & BUILDING SUPPLIES"),
	array("Furniture & Variety", "FURNITURE")
);
$catNames = array(
	array("Bathroom", "Bathroom Supplies"),
	array("Kitchen & Laundry", "Kitchen & Laundry"),
	array("Appliances & Heatpumps", "Appliances"),
	array("AIR CON / HEAT PUMPS", "Air Conditioners / Heat Pumps"),
	array("Flooring & Tiling", "Flooring & Tiling"),
	array("Lighting, Electrical & Plumbing", "Lighting, Electrical & Plumbing"),
	array("Hardware & Building Supplies", "Hardware & Building Supplies"),
	array("Furniture & Variety", "Furniture")
);
?>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&status=0&version=v2.3";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div id="zheader">
	<div class="<!--navbar-fixed-top-->">
		<div id="line1">
			<div class="container">
				<a title="Trade Depot" href="<?php echo $this->getUrl('') ?>" class="zlogo">
					<img id="logo" src="<?php echo $this->getUrl('') . 'skin/frontend/default/sns_i8style/images/new-logo2b-blue1.png' ?>" alt="Trade Depot Logo" width=318 height=52>
					<img id="logo-line" src="<?php echo $this->getUrl('') . 'skin/frontend/default/sns_i8style/images/new-logo-line2.png' ?>" alt="Trade Depot Logo" width=275 height=19 class="hidden-xs hidden-sm hidden-md">
				</a>
				<div id="break"></div>
				<div class="line1-right">
					<ul id="znav">
						<li>
							<span class="dropdown">
								<a href="#" class="fa fa-search fa-lg" data-toggle="dropdown" onclick="setTimeout(function(){jQuery('#search').focus();},10)"><span class="nav-word">SEARCH</span></a>
								<?php echo $this->getChildHtml('topSearch'); ?>
							</span>
						</li>
						<li><a href="<?php echo $this->getUrl('') . 'about-trade-depot/' ?>" class="fa fa-phone fa-lg"><span class="nav-word">ABOUT US</span></a></li>
						<li><a href="<?php echo $this->getUrl('') . 'customer/account/login/' ?>" class="fa fa-user fa-lg"><span class="nav-word"><?php if ($this->helper("customer")->isLoggedIn()) echo "MY ACCOUNT"; else echo "SIGN IN"; ?></span></a></li>
						<li id="header-cart"><?php echo $this->getChildHtml('mini-cart') ?></li>
					</ul>
					<div style="clear:both"></div>
					<div class="showroom">
						<i class="fa fa-map-marker"></i>  
						<span class="pickup">
							<a href="https://www.google.co.nz/maps/place/Trade+Depot/@-37.051966,174.9268913,17z/data=!3m1!4b1!4m2!3m1!1s0x6d0d52da63b5e0bb:0x7306d83fbab0de21" target="_blank">Showroom &amp; Pickup, <span class="">17 Inlet Road, Takanini, Auckland. </span></a>
							<div class="visible-xs"></div>
							<a href="http://www.tradedepot.co.nz/showroom-opening-hours">Phone: 09-298 2535 </a>
						</span>
					</div>
				</div>
			</div>
		</div>
		<div id="line2">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>                        
					</button>
				</div>
				<div class="collapse navbar-collapse" id="myNavbar">
					<ul class="nav navbar-nav">
						<?php
							$navIndex = 0;
							foreach ($catNames as $catName) {
								$navIndex++;
								
								$cat = Mage::getResourceModel('catalog/category_collection')
									->addFieldToFilter('name', $catName[0])
									->getFirstItem();
									
								echo "<li class='dropdown'>";
								echo '<a class="dropdown-toggle" data-toggle="dropdown" href="' . $cat->getUrl() . '">' . $catName[1] . '</a>';
								if ($navIndex < 5) {
									echo '<ul class="dropdown-menu">';
								} else {
									echo '<ul class="dropdown-menu dropdown-menu-right">';
								}

								echo '<li><a href="' . $cat->getUrl() . '"><span style="visibility:hidden">></span>' . 'Show All<br><span style="visibility:hidden">></span>' . $catName[1] . '</a></li>';
								
								//$subcats = $cat->getChildren();
								$subcats = Mage::getModel('catalog/category')->load($cat->getId())->getChildrenCategories();
								$count = 0;
								foreach ($subcats as $subcat) {
									if ($subcat->getIsActive()) {
										echo '<li><a href="' . $subcat->getURL() . '"><span>></span>' . $subcat->getName() . '</a></li>';
										$count++;
									}
								}
								if ($count == 0) {
									echo '<li><a href="' . $cat->getUrl() . '"><span>></span>' . $cat->getName() . '</a></li>';
								}
								echo "</ul>";
								echo "</li>";
							}
						?>
					</ul>
				</div>
				<script type="text/javascript">
					if (jQuery(window).width() >= 768) {
						var height = jQuery('#myNavbar>ul>li:nth-child(6)').height();
						jQuery('#myNavbar>ul>li>a').css("height", height);
					} else {
						jQuery('button.navbar-toggle').click();
					}
				</script>
			</div>
		</div>
	</div>
</div>